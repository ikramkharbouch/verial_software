<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Configuration</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.23.1/antd.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        padding: 20px;
        margin: 0;
      }

      .config-container {
        max-width: 600px;
        margin: auto;
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
      }

      .ant-form-item {
        margin-bottom: 20px;
      }

      .ant-btn {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="config-container">
      <h1>System Configuration</h1>
      <form id="configForm" class="ant-form">
        <!-- Language Selection -->
        <div class="ant-form-item">
          <label for="language" class="ant-form-item-label">Language:</label>
          <select id="language" class="ant-input">
            <option value="en">English</option>
            <option value="fr">French</option>
            <option value="es">Spanish</option>
          </select>
        </div>

        <!-- Theme Selection -->
        <div class="ant-form-item">
          <label for="theme" class="ant-form-item-label">Theme:</label>
          <select id="theme" class="ant-input">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </div>

        <!-- Default File Path -->
        <div class="ant-form-item">
          <label for="defaultPath" class="ant-form-item-label">Default File Path:</label>
          <input type="text" id="defaultPath" placeholder="e.g., /user/files" class="ant-input" />
        </div>

        <!-- Notifications -->
        <div class="ant-form-item">
          <label for="notifications" class="ant-form-item-label">Enable Notifications:</label>
          <select id="notifications" class="ant-input">
            <option value="enabled">Enabled</option>
            <option value="disabled">Disabled</option>
          </select>
        </div>

        <!-- Auto-Update -->
        <div class="ant-form-item">
          <label for="autoUpdate" class="ant-form-item-label">Auto-Update:</label>
          <select id="autoUpdate" class="ant-input">
            <option value="enabled">Enabled</option>
            <option value="disabled">Disabled</option>
          </select>
        </div>

        <!-- Save Button -->
        <div class="ant-form-item">
          <button type="button" class="ant-btn ant-btn-primary" onclick="saveConfiguration()">Save Configuration</button>
        </div>
      </form>
    </div>

    <script>
      const { ipcRenderer } = require('electron');
      const Store = require('electron-store');
      const store = new Store();

      // Prepopulate the form with saved values
      window.onload = () => {
        document.getElementById('language').value = store.get('language', 'en');
        document.getElementById('theme').value = store.get('theme', 'light');
        document.getElementById('defaultPath').value = store.get('defaultPath', '');
        document.getElementById('notifications').value = store.get('notifications', 'enabled');
        document.getElementById('autoUpdate').value = store.get('autoUpdate', 'enabled');
      };

      // Save configuration
      function saveConfiguration() {
        const language = document.getElementById('language').value;
        const theme = document.getElementById('theme').value;
        const defaultPath = document.getElementById('defaultPath').value;
        const notifications = document.getElementById('notifications').value;
        const autoUpdate = document.getElementById('autoUpdate').value;

        store.set('language', language);
        store.set('theme', theme);
        store.set('defaultPath', defaultPath);
        store.set('notifications', notifications);
        store.set('autoUpdate', autoUpdate);

        alert('Configuration saved successfully!');
        ipcRenderer.send('close-popup'); // Close the popup
      }
    </script>
  </body>
</html>
